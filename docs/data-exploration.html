<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 7 Data exploration | Exam PA Study Guide, Spring 2022</title>
  <meta name="description" content=" 7 Data exploration | Exam PA Study Guide, Spring 2022" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content=" 7 Data exploration | Exam PA Study Guide, Spring 2022" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 7 Data exploration | Exam PA Study Guide, Spring 2022" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="images/artificial_actuary_logo_favicon.png" type="image/x-icon" />
<link rel="prev" href="r-programming.html"/>
<link rel="next" href="introduction-to-modeling.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exam PA Study Manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#faq-frequently-asked-questions"><i class="fa fa-check"></i><b>0.1</b> FAQ: Frequently Asked Questions</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="the-exam.html"><a href="the-exam.html"><i class="fa fa-check"></i><b>1</b> The exam</a></li>
<li class="chapter" data-level="2" data-path="prometric-demo.html"><a href="prometric-demo.html"><i class="fa fa-check"></i><b>2</b> Prometric Demo</a></li>
<li class="chapter" data-level="3" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>3</b> Introduction</a></li>
<li class="chapter" data-level="4" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>4</b> Getting started</a>
<ul>
<li class="chapter" data-level="4.1" data-path="getting-started.html"><a href="getting-started.html#installing-r"><i class="fa fa-check"></i><b>4.1</b> Installing R</a></li>
<li class="chapter" data-level="4.2" data-path="getting-started.html"><a href="getting-started.html#installing-rstudio"><i class="fa fa-check"></i><b>4.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="4.3" data-path="getting-started.html"><a href="getting-started.html#download-the-data"><i class="fa fa-check"></i><b>4.3</b> Download the data</a></li>
<li class="chapter" data-level="4.4" data-path="getting-started.html"><a href="getting-started.html#download-islr"><i class="fa fa-check"></i><b>4.4</b> Download ISLR</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="how-much-r-do-i-need-to-know-to-pass.html"><a href="how-much-r-do-i-need-to-know-to-pass.html"><i class="fa fa-check"></i><b>5</b> How much R do I need to know to pass?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="how-much-r-do-i-need-to-know-to-pass.html"><a href="how-much-r-do-i-need-to-know-to-pass.html#how-to-use-the-pa-r-cheat-sheets"><i class="fa fa-check"></i><b>5.1</b> How to use the PA R cheat sheets?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="r-programming.html"><a href="r-programming.html"><i class="fa fa-check"></i><b>6</b> R programming</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-programming.html"><a href="r-programming.html#notebook-chunks"><i class="fa fa-check"></i><b>6.1</b> Notebook chunks</a></li>
<li class="chapter" data-level="6.2" data-path="r-programming.html"><a href="r-programming.html#basic-operations"><i class="fa fa-check"></i><b>6.2</b> Basic operations</a></li>
<li class="chapter" data-level="6.3" data-path="r-programming.html"><a href="r-programming.html#lists"><i class="fa fa-check"></i><b>6.3</b> Lists</a></li>
<li class="chapter" data-level="6.4" data-path="r-programming.html"><a href="r-programming.html#functions"><i class="fa fa-check"></i><b>6.4</b> Functions</a></li>
<li class="chapter" data-level="6.5" data-path="r-programming.html"><a href="r-programming.html#data-frames"><i class="fa fa-check"></i><b>6.5</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-exploration.html"><a href="data-exploration.html"><i class="fa fa-check"></i><b>7</b> Data exploration</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-exploration.html"><a href="data-exploration.html#how-to-make-graphs-in-r"><i class="fa fa-check"></i><b>7.1</b> How to make graphs in R?</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="data-exploration.html"><a href="data-exploration.html#add-a-plot"><i class="fa fa-check"></i><b>7.1.1</b> Add a plot</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="data-exploration.html"><a href="data-exploration.html#the-different-graph-types"><i class="fa fa-check"></i><b>7.2</b> The different graph types</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="data-exploration.html"><a href="data-exploration.html#histogram"><i class="fa fa-check"></i><b>7.2.1</b> Histogram</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-exploration.html"><a href="data-exploration.html#box-plot"><i class="fa fa-check"></i><b>7.2.2</b> Box plot</a></li>
<li class="chapter" data-level="7.2.3" data-path="data-exploration.html"><a href="data-exploration.html#scatterplot"><i class="fa fa-check"></i><b>7.2.3</b> Scatterplot</a></li>
<li class="chapter" data-level="7.2.4" data-path="data-exploration.html"><a href="data-exploration.html#bar-charts"><i class="fa fa-check"></i><b>7.2.4</b> Bar charts</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-exploration.html"><a href="data-exploration.html#how-to-save-time-with-dplyr"><i class="fa fa-check"></i><b>7.3</b> How to save time with dplyr?</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="data-exploration.html"><a href="data-exploration.html#data-manipulation-chaining"><i class="fa fa-check"></i><b>7.3.1</b> Data manipulation chaining</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="data-exploration.html"><a href="data-exploration.html#how-to-explore-the-data"><i class="fa fa-check"></i><b>7.4</b> How to explore the data?</a></li>
<li class="chapter" data-level="7.5" data-path="data-exploration.html"><a href="data-exploration.html#how-to-transform-the-data"><i class="fa fa-check"></i><b>7.5</b> How to transform the data?</a></li>
<li class="chapter" data-level="7.6" data-path="data-exploration.html"><a href="data-exploration.html#missing-values"><i class="fa fa-check"></i><b>7.6</b> Missing values</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="data-exploration.html"><a href="data-exploration.html#types-of-missing-values"><i class="fa fa-check"></i><b>7.6.1</b> Types of Missing Values</a></li>
<li class="chapter" data-level="7.6.2" data-path="data-exploration.html"><a href="data-exploration.html#missing-value-resolutions"><i class="fa fa-check"></i><b>7.6.2</b> Missing Value Resolutions:</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="data-exploration.html"><a href="data-exploration.html#example-soa-pa-121219-task-1"><i class="fa fa-check"></i><b>7.7</b> Example: SOA PA 12/12/19, Task 1</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="data-exploration.html"><a href="data-exploration.html#garbage-in-garbage-out"><i class="fa fa-check"></i><b>7.7.1</b> Garbage in; garbage out üóë</a></li>
<li class="chapter" data-level="7.7.2" data-path="data-exploration.html"><a href="data-exploration.html#be-a-detective"><i class="fa fa-check"></i><b>7.7.2</b> Be a detective üîé</a></li>
<li class="chapter" data-level="7.7.3" data-path="data-exploration.html"><a href="data-exploration.html#a-picture-is-worth-a-thousand-words"><i class="fa fa-check"></i><b>7.7.3</b> A picture is worth a thousand words üì∑</a></li>
<li class="chapter" data-level="7.7.4" data-path="data-exploration.html"><a href="data-exploration.html#factor-or-numeric"><i class="fa fa-check"></i><b>7.7.4</b> Factor or numeric ‚ùì</a></li>
<li class="chapter" data-level="7.7.5" data-path="data-exploration.html"><a href="data-exploration.html#of-statistics-are-false"><i class="fa fa-check"></i><b>7.7.5</b> 73.6% of statistics are false üò±</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="data-exploration.html"><a href="data-exploration.html#exercises"><i class="fa fa-check"></i><b>7.8</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="data-exploration.html"><a href="data-exploration.html#data-exploration-practice"><i class="fa fa-check"></i><b>7.8.1</b> Data Exploration Practice</a></li>
<li class="chapter" data-level="7.8.2" data-path="data-exploration.html"><a href="data-exploration.html#dplyr-practice"><i class="fa fa-check"></i><b>7.8.2</b> Dplyr Practice</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="data-exploration.html"><a href="data-exploration.html#answers-to-exercises"><i class="fa fa-check"></i><b>7.9</b> Answers to exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html"><i class="fa fa-check"></i><b>8</b> Introduction to modeling</a>
<ul>
<li class="chapter" data-level="8.1" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#modeling-vocabulary"><i class="fa fa-check"></i><b>8.1</b> Modeling vocabulary</a></li>
<li class="chapter" data-level="8.2" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#modeling-notation"><i class="fa fa-check"></i><b>8.2</b> Modeling notation</a></li>
<li class="chapter" data-level="8.3" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#ordinary-least-squares-ols"><i class="fa fa-check"></i><b>8.3</b> Ordinary Least Squares (OLS)</a></li>
<li class="chapter" data-level="8.4" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#r2-statistic"><i class="fa fa-check"></i><b>8.4</b> R^2 Statistic</a></li>
<li class="chapter" data-level="8.5" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#correlation"><i class="fa fa-check"></i><b>8.5</b> Correlation</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#pearsons-correlation"><i class="fa fa-check"></i><b>8.5.1</b> Pearson‚Äôs correlation</a></li>
<li class="chapter" data-level="8.5.2" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#spearman-rank-correlation"><i class="fa fa-check"></i><b>8.5.2</b> Spearman (rank) correlation</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#regression-vs.-classification"><i class="fa fa-check"></i><b>8.6</b> Regression vs.¬†classification</a></li>
<li class="chapter" data-level="8.7" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#regression-metrics"><i class="fa fa-check"></i><b>8.7</b> Regression metrics</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#example-soa-pa-61820-task-4"><i class="fa fa-check"></i><b>8.7.1</b> Example: SOA PA 6/18/20, Task 4</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="introduction-to-modeling.html"><a href="introduction-to-modeling.html#example-health-costs"><i class="fa fa-check"></i><b>8.8</b> Example: Health Costs</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html"><i class="fa fa-check"></i><b>9</b> Generalized linear Models (GLMs)</a>
<ul>
<li class="chapter" data-level="9.0.1" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#assumptions-of-ols"><i class="fa fa-check"></i><b>9.0.1</b> Assumptions of OLS</a></li>
<li class="chapter" data-level="9.0.2" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#assumptions-of-glms"><i class="fa fa-check"></i><b>9.0.2</b> Assumptions of GLMs</a></li>
<li class="chapter" data-level="9.1" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#advantages-and-disadvantages"><i class="fa fa-check"></i><b>9.1</b> Advantages and disadvantages</a></li>
<li class="chapter" data-level="9.2" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#glms-for-regression"><i class="fa fa-check"></i><b>9.2</b> GLMs for regression</a></li>
<li class="chapter" data-level="9.3" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#interpretation-of-coefficients"><i class="fa fa-check"></i><b>9.3</b> Interpretation of coefficients</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#identity-link"><i class="fa fa-check"></i><b>9.3.1</b> Identity link</a></li>
<li class="chapter" data-level="9.3.2" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#log-link"><i class="fa fa-check"></i><b>9.3.2</b> Log link</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="generalized-linear-models-glms.html"><a href="generalized-linear-models-glms.html#other-links"><i class="fa fa-check"></i><b>9.4</b> Other links</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="glms-for-classification.html"><a href="glms-for-classification.html"><i class="fa fa-check"></i><b>10</b> GLMs for classification</a>
<ul>
<li class="chapter" data-level="10.1" data-path="glms-for-classification.html"><a href="glms-for-classification.html#binary-target"><i class="fa fa-check"></i><b>10.1</b> Binary target</a></li>
<li class="chapter" data-level="10.2" data-path="glms-for-classification.html"><a href="glms-for-classification.html#count-target"><i class="fa fa-check"></i><b>10.2</b> Count target</a></li>
<li class="chapter" data-level="10.3" data-path="glms-for-classification.html"><a href="glms-for-classification.html#link-functions"><i class="fa fa-check"></i><b>10.3</b> Link functions</a></li>
<li class="chapter" data-level="10.4" data-path="glms-for-classification.html"><a href="glms-for-classification.html#interpretation-of-coefficients-1"><i class="fa fa-check"></i><b>10.4</b> Interpretation of coefficients</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="glms-for-classification.html"><a href="glms-for-classification.html#logit"><i class="fa fa-check"></i><b>10.4.1</b> Logit</a></li>
<li class="chapter" data-level="10.4.2" data-path="glms-for-classification.html"><a href="glms-for-classification.html#probit-cauchit-cloglog"><i class="fa fa-check"></i><b>10.4.2</b> Probit, Cauchit, Cloglog</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="glms-for-classification.html"><a href="glms-for-classification.html#demo-the-model-for-interpretation"><i class="fa fa-check"></i><b>10.5</b> Demo the model for interpretation</a></li>
<li class="chapter" data-level="10.6" data-path="glms-for-classification.html"><a href="glms-for-classification.html#example---auto-claims"><i class="fa fa-check"></i><b>10.6</b> Example - Auto Claims</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="classification-metrics.html"><a href="classification-metrics.html"><i class="fa fa-check"></i><b>11</b> Classification metrics</a>
<ul>
<li class="chapter" data-level="11.1" data-path="classification-metrics.html"><a href="classification-metrics.html#area-under-the-roc-curve-auc"><i class="fa fa-check"></i><b>11.1</b> Area Under the ROC Curve (AUC)</a></li>
<li class="chapter" data-level="11.2" data-path="classification-metrics.html"><a href="classification-metrics.html#example---auto-claims-1"><i class="fa fa-check"></i><b>11.2</b> Example - Auto Claims</a></li>
<li class="chapter" data-level="11.3" data-path="classification-metrics.html"><a href="classification-metrics.html#example-soa-hr-task-5"><i class="fa fa-check"></i><b>11.3</b> Example: SOA HR, Task 5</a></li>
<li class="chapter" data-level="11.4" data-path="classification-metrics.html"><a href="classification-metrics.html#example-soa-pa-121219-task-11"><i class="fa fa-check"></i><b>11.4</b> Example: SOA PA 12/12/19, Task 11</a></li>
<li class="chapter" data-level="11.5" data-path="classification-metrics.html"><a href="classification-metrics.html#additional-reading"><i class="fa fa-check"></i><b>11.5</b> Additional reading</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html"><i class="fa fa-check"></i><b>12</b> Additional GLM topics</a>
<ul>
<li class="chapter" data-level="12.1" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#residuals"><i class="fa fa-check"></i><b>12.1</b> Residuals</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#raw-residuals"><i class="fa fa-check"></i><b>12.1.1</b> Raw residuals</a></li>
<li class="chapter" data-level="12.1.2" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#deviance-residuals"><i class="fa fa-check"></i><b>12.1.2</b> Deviance residuals</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#example"><i class="fa fa-check"></i><b>12.2</b> Example</a></li>
<li class="chapter" data-level="12.3" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#log-transforms-of-predictors"><i class="fa fa-check"></i><b>12.3</b> Log transforms of predictors</a></li>
<li class="chapter" data-level="12.4" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#example-1"><i class="fa fa-check"></i><b>12.4</b> Example</a></li>
<li class="chapter" data-level="12.5" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#reference-levels"><i class="fa fa-check"></i><b>12.5</b> Reference levels</a></li>
<li class="chapter" data-level="12.6" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#interactions"><i class="fa fa-check"></i><b>12.6</b> Interactions</a></li>
<li class="chapter" data-level="12.7" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#offsets"><i class="fa fa-check"></i><b>12.7</b> Offsets</a></li>
<li class="chapter" data-level="12.8" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#tweedie-regression"><i class="fa fa-check"></i><b>12.8</b> Tweedie regression</a></li>
<li class="chapter" data-level="12.9" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#combinations-of-link-functions-and-target-distributions"><i class="fa fa-check"></i><b>12.9</b> Combinations of Link Functions and Target Distributions</a>
<ul>
<li class="chapter" data-level="12.9.1" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#gaussian-response-with-log-link"><i class="fa fa-check"></i><b>12.9.1</b> Gaussian Response with Log Link</a></li>
<li class="chapter" data-level="12.9.2" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#gaussian-response-with-inverse-link"><i class="fa fa-check"></i><b>12.9.2</b> Gaussian Response with Inverse Link</a></li>
<li class="chapter" data-level="12.9.3" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#gaussian-response-with-identity-link"><i class="fa fa-check"></i><b>12.9.3</b> Gaussian Response with Identity Link</a></li>
<li class="chapter" data-level="12.9.4" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#gaussian-response-with-log-link-and-negative-values"><i class="fa fa-check"></i><b>12.9.4</b> Gaussian Response with Log Link and Negative Values</a></li>
<li class="chapter" data-level="12.9.5" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#gamma-response-with-log-link"><i class="fa fa-check"></i><b>12.9.5</b> Gamma Response with Log Link</a></li>
<li class="chapter" data-level="12.9.6" data-path="additional-glm-topics.html"><a href="additional-glm-topics.html#gamma-with-inverse-link"><i class="fa fa-check"></i><b>12.9.6</b> Gamma with Inverse Link</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html"><i class="fa fa-check"></i><b>13</b> GLM variable selection</a>
<ul>
<li class="chapter" data-level="13.1" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#stepwise-subset-selection"><i class="fa fa-check"></i><b>13.1</b> Stepwise subset selection</a></li>
<li class="chapter" data-level="13.2" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#example-soa-pa-61219-task-6"><i class="fa fa-check"></i><b>13.2</b> Example: SOA PA 6/12/19, Task 6</a></li>
<li class="chapter" data-level="13.3" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#penalized-linear-models"><i class="fa fa-check"></i><b>13.3</b> Penalized Linear Models</a></li>
<li class="chapter" data-level="13.4" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#ridge-regression"><i class="fa fa-check"></i><b>13.4</b> Ridge Regression</a></li>
<li class="chapter" data-level="13.5" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#lasso"><i class="fa fa-check"></i><b>13.5</b> Lasso</a></li>
<li class="chapter" data-level="13.6" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#elastic-net"><i class="fa fa-check"></i><b>13.6</b> Elastic Net</a></li>
<li class="chapter" data-level="13.7" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#advantages-and-disadvantages-1"><i class="fa fa-check"></i><b>13.7</b> Advantages and disadvantages</a></li>
<li class="chapter" data-level="13.8" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#example-ridge-regression"><i class="fa fa-check"></i><b>13.8</b> Example: Ridge Regression</a></li>
<li class="chapter" data-level="13.9" data-path="glm-variable-selection.html"><a href="glm-variable-selection.html#example-the-lasso"><i class="fa fa-check"></i><b>13.9</b> Example: The Lasso</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="bias-variance-trade-off.html"><a href="bias-variance-trade-off.html"><i class="fa fa-check"></i><b>14</b> Bias-variance trade-off</a></li>
<li class="chapter" data-level="15" data-path="tree-based-models.html"><a href="tree-based-models.html"><i class="fa fa-check"></i><b>15</b> Tree-based models</a>
<ul>
<li class="chapter" data-level="15.1" data-path="tree-based-models.html"><a href="tree-based-models.html#decision-trees"><i class="fa fa-check"></i><b>15.1</b> Decision Trees</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="tree-based-models.html"><a href="tree-based-models.html#example-soa-pa-6182020-task-6"><i class="fa fa-check"></i><b>15.1.1</b> Example: SOA PA 6/18/2020, Task 6</a></li>
<li class="chapter" data-level="15.1.2" data-path="tree-based-models.html"><a href="tree-based-models.html#advantages-and-disadvantages-2"><i class="fa fa-check"></i><b>15.1.2</b> Advantages and disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="tree-based-models.html"><a href="tree-based-models.html#ensemble-learning"><i class="fa fa-check"></i><b>15.2</b> Ensemble learning</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="tree-based-models.html"><a href="tree-based-models.html#bagging"><i class="fa fa-check"></i><b>15.2.1</b> Bagging</a></li>
<li class="chapter" data-level="15.2.2" data-path="tree-based-models.html"><a href="tree-based-models.html#boosting"><i class="fa fa-check"></i><b>15.2.2</b> Boosting</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="tree-based-models.html"><a href="tree-based-models.html#random-forests"><i class="fa fa-check"></i><b>15.3</b> Random Forests</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="tree-based-models.html"><a href="tree-based-models.html#example-2"><i class="fa fa-check"></i><b>15.3.1</b> Example</a></li>
<li class="chapter" data-level="15.3.2" data-path="tree-based-models.html"><a href="tree-based-models.html#variable-importance"><i class="fa fa-check"></i><b>15.3.2</b> Variable Importance</a></li>
<li class="chapter" data-level="15.3.3" data-path="tree-based-models.html"><a href="tree-based-models.html#partial-dependence"><i class="fa fa-check"></i><b>15.3.3</b> Partial dependence</a></li>
<li class="chapter" data-level="15.3.4" data-path="tree-based-models.html"><a href="tree-based-models.html#advantages-and-disadvantages-3"><i class="fa fa-check"></i><b>15.3.4</b> Advantages and disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="tree-based-models.html"><a href="tree-based-models.html#gradient-boosted-trees"><i class="fa fa-check"></i><b>15.4</b> Gradient Boosted Trees</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="tree-based-models.html"><a href="tree-based-models.html#gradient-boosting"><i class="fa fa-check"></i><b>15.4.1</b> Gradient Boosting</a></li>
<li class="chapter" data-level="15.4.2" data-path="tree-based-models.html"><a href="tree-based-models.html#notation"><i class="fa fa-check"></i><b>15.4.2</b> Notation</a></li>
<li class="chapter" data-level="15.4.3" data-path="tree-based-models.html"><a href="tree-based-models.html#parameters"><i class="fa fa-check"></i><b>15.4.3</b> Parameters</a></li>
<li class="chapter" data-level="15.4.4" data-path="tree-based-models.html"><a href="tree-based-models.html#example-3"><i class="fa fa-check"></i><b>15.4.4</b> Example</a></li>
<li class="chapter" data-level="15.4.5" data-path="tree-based-models.html"><a href="tree-based-models.html#advantages-and-disadvantages-4"><i class="fa fa-check"></i><b>15.4.5</b> Advantages and disadvantages</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="tree-based-models.html"><a href="tree-based-models.html#exercises-1"><i class="fa fa-check"></i><b>15.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="tree-based-models.html"><a href="tree-based-models.html#rf-tuning-with-caret"><i class="fa fa-check"></i><b>15.5.1</b> 1. RF tuning with <code>caret</code></a></li>
<li class="chapter" data-level="15.5.2" data-path="tree-based-models.html"><a href="tree-based-models.html#tuning-a-gbm-with-caret"><i class="fa fa-check"></i><b>15.5.2</b> 2. Tuning a GBM with <code>caret</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html"><i class="fa fa-check"></i><b>16</b> Unsupervised Learning</a>
<ul>
<li class="chapter" data-level="16.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#types-of-learning"><i class="fa fa-check"></i><b>16.1</b> Types of Learning</a></li>
<li class="chapter" data-level="16.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#correlation-analysis"><i class="fa fa-check"></i><b>16.2</b> Correlation Analysis</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#correlation-does-not-equal-causation"><i class="fa fa-check"></i><b>16.2.1</b> Correlation does not equal causation</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#principal-component-analysis-pca"><i class="fa fa-check"></i><b>16.3</b> Principal Component Analysis (PCA)</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#example-us-arrests"><i class="fa fa-check"></i><b>16.3.1</b> Example: US Arrests</a></li>
<li class="chapter" data-level="16.3.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#example-soa-pa-61219-task-3"><i class="fa fa-check"></i><b>16.3.2</b> Example: SOA PA 6/12/19, Task 3</a></li>
<li class="chapter" data-level="16.3.3" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#example-pca-on-cancel-cells"><i class="fa fa-check"></i><b>16.3.3</b> Example: PCA on Cancel Cells</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#clustering"><i class="fa fa-check"></i><b>16.4</b> Clustering</a></li>
<li class="chapter" data-level="16.5" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#k-means-clustering"><i class="fa fa-check"></i><b>16.5</b> K-Means Clustering</a></li>
<li class="chapter" data-level="16.6" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#hierarchical-clustering"><i class="fa fa-check"></i><b>16.6</b> Hierarchical Clustering</a>
<ul>
<li class="chapter" data-level="16.6.1" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#example-clustering-cancel-cells"><i class="fa fa-check"></i><b>16.6.1</b> Example: Clustering Cancel Cells</a></li>
<li class="chapter" data-level="16.6.2" data-path="unsupervised-learning.html"><a href="unsupervised-learning.html#references"><i class="fa fa-check"></i><b>16.6.2</b> References</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="writing-and-communication.html"><a href="writing-and-communication.html"><i class="fa fa-check"></i><b>17</b> Writing and Communication</a>
<ul>
<li class="chapter" data-level="17.1" data-path="writing-and-communication.html"><a href="writing-and-communication.html#spelling-and-grammar"><i class="fa fa-check"></i><b>17.1</b> Spelling and Grammar</a></li>
<li class="chapter" data-level="17.2" data-path="writing-and-communication.html"><a href="writing-and-communication.html#final-review-webinar"><i class="fa fa-check"></i><b>17.2</b> Final Review Webinar</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i><b>18</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exam PA Study Guide, Spring 2022</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-exploration" class="section level1" number="7">
<h1><span class="header-section-number"> 7</span> Data exploration</h1>
<p><a href="https://futuroinsight.com/mod/page/view.php?id=133"><img src="images/data_exploration.png" alt="Lecture" /></a></p>
<p>Exploration is about making discoveries and you should have a curious mind and strong technical skills to make sense of the data. This chapter will give you the tools to take dirty, unprocessed data, clean it up, discover interesting trends using graphs and summary statistics, and communicate your results to a business audience.</p>
<p>About 10 - 15% of your grade will be based on data exploration. Every version of Exam PA, such as December 2018, June 2019, and December 2019, have all had questions about data exploration. Putting in extra practice in this area is guaranteed to give you a better score because it will free up time that you can use elsewhere.</p>
<p>The syllabus divides this into three learning objectives, which can make the topic intimidating. Data Visualization, Data Types and Exploration, and Data Issues and Resolutions, but you will always be doing these things together, and so this chapter will cover all three at once.</p>
<p><img src="images/learning_obj3.PNG" width="400%" style="display: block; margin: auto;" /></p>
<p><img src="images/learning_obj4.PNG" width="400%" style="display: block; margin: auto;" /></p>
<p><img src="images/learning_obj5.PNG" width="400%" style="display: block; margin: auto;" /></p>
<p>Exploratory Data Analysis (EDA) is usually the first phase of an analytics project. This is as much of an art as it is a science because everyone has their style. If you ask two actuaries to perform EDA on the same data set, they will likely use different methods. These can be broken down into phases.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-45"></span>
<img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-45-1.png" alt="Data Exploration Phases - From *R for Data Science*" width="700" />
<p class="caption">
Figure 7.1: Data Exploration Phases - From <em>R for Data Science</em>
</p>
</div>
<p>From the language on the December 2020 Syllabus, these are</p>
<p><strong>Import:</strong></p>
<ul>
<li>Evaluate the quality of appropriate data sources for a problem.</li>
<li>Identify the regulations, standards, and ethics surrounding predictive modeling and data</li>
</ul>
<p><strong>Tidy:</strong></p>
<ul>
<li>Identify structured, unstructured, and semi-structured data.</li>
<li>Identify the types of variables and terminology used in predictive modeling.</li>
<li>Understand basic methods of handling missing data.</li>
<li>Implement effective data design with respect to time frame, sampling, and granularity.</li>
</ul>
<p><strong>Transform:</strong></p>
<ul>
<li>Identify opportunities to create features from the primary data that may add value.</li>
<li>Identify outliers and other data issues.</li>
<li>Handle non-linear relationships via transformations.</li>
</ul>
<p><strong>Visualize:</strong></p>
<ul>
<li>Apply univariate and bivariate data exploration techniques.</li>
<li>Understand the fundamental principles of constructing graphs.</li>
<li>Create a variety of graphs using the ggplot2 package.</li>
</ul>
<p><strong>Model:</strong></p>
<ul>
<li>Fit and interpret models</li>
</ul>
<p><strong>Communicate:</strong></p>
<ul>
<li>Write the report</li>
</ul>
<div id="how-to-make-graphs-in-r" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> How to make graphs in R?</h2>
<p>Let us create a histogram of the claims. The first step is to create a blank canvas that holds the columns that are needed. The library to make this is called <a href="https://ggplot2.tidyverse.org/">ggplot2</a>.</p>
<p>The <code>aesthetic</code> argument, <code>aes</code>, means that the variable shown will the the claims.</p>
<p>The <code>sample_frac</code> means that only 20% of the data is used. This makes the visuzlization less cluttered.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-exploration.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ExamPAData)</span>
<span id="cb105-2"><a href="data-exploration.html#cb105-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> readmission <span class="sc">%&gt;%</span> <span class="fu">sample_frac</span>(<span class="fl">0.05</span>)</span>
<span id="cb105-3"><a href="data-exploration.html#cb105-3" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb105-4"><a href="data-exploration.html#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(HCC.Riskscore))</span></code></pre></div>
<p>If we look at <code>p</code>, we see that it is nothing but white space with axis for <code>count</code> and <code>income</code>.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data-exploration.html#cb106-1" aria-hidden="true" tabindex="-1"></a>p</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-48-1.png" width="576" /></p>
<div id="add-a-plot" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Add a plot</h3>
<p>We add a histogram</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-exploration.html#cb107-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-49-1.png" width="576" /></p>
<p>Different plots are called ‚Äúgeoms‚Äù for ‚Äúgeometric objects.‚Äù Geometry = Geo (space) + meter (measure), and graphs measure data. For instance, instead of creating a histogram, we can draw a gamma distribution with <code>stat_density</code>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-exploration.html#cb108-1" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">stat_density</span>()</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-50-1.png" width="576" /></p>
<p>Create an xy plot by adding and <code>x</code> and a <code>y</code> argument to <code>aesthetic</code>.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="data-exploration.html#cb109-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb109-2"><a href="data-exploration.html#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HCC.Riskscore, <span class="at">y =</span> Age)) <span class="sc">+</span> </span>
<span id="cb109-3"><a href="data-exploration.html#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-51-1.png" width="576" /></p>
</div>
</div>
<div id="the-different-graph-types" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> The different graph types</h2>
<p>Only four types of graphs are used for data exploration. You will only need to understand how to interpret them. The SOA will provide you with the code needed to create them. There will not be enough time for you to make your graphs.</p>
<div id="histogram" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Histogram</h3>
<p>The <a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">histogram</a> is used when you want to look at the probability distribution of a continuous variable.</p>
<p>The template code in your .Rmd file will look like this. Just change ‚Äúvariable‚Äù to the name without quotes of the variable and then copy and paste.</p>
</div>
<div id="box-plot" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Box plot</h3>
<p>The <a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">boxplot</a> compactly displays the distribution of a continuous variable. It visualizes five summary statistics (the median, two hinges, and two whiskers) and all ‚Äúoutlying‚Äù observations individually.</p>
</div>
<div id="scatterplot" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Scatterplot</h3>
<p>The <a href="https://ggplot2.tidyverse.org/reference/geom_point.html">point geom</a> is used to create scatterplots. The scatterplot is most useful for displaying the relationship between two continuous variables. It can be used to compare one continuous and one categorical variable or two categorical variables.</p>
</div>
<div id="bar-charts" class="section level3" number="7.2.4">
<h3><span class="header-section-number">7.2.4</span> Bar charts</h3>
<p>There are two types of <a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">bar charts</a>: geom_bar() (Univariate) and geom_col() (Bivatiate). geom_bar() makes the height of the bar proportional to the number of cases in each group (or if the weight aesthetic is supplied, the sum of the weights). If you want the heights of the bars to represent values in the data, use geom_col() instead. geom_bar() uses stat_count() by default: it counts the number of cases at each x position.</p>
</div>
</div>
<div id="how-to-save-time-with-dplyr" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> How to save time with dplyr?</h2>
<p>You may have noticed that writing code for data manipulation can be slow. Fortunately, there is a faster, 100%-legal way of doing data manipulation that has worked for hundreds of exam candidates (the author included) who have taken Exam PA.</p>
<p>Up to this point, we have been using old R libraries. By making use of newer R libraries, we can save ourselves time. These will all be provided for you at Prometric within the <a href="https://www.tidyverse.org/">tidyverse</a> library.</p>
<div id="data-manipulation-chaining" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Data manipulation chaining</h3>
<p>Pipes allow for data manipulations to be chained with visualizations. The possibilities are nearly limitless.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-exploration.html#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb110-2"><a href="data-exploration.html#cb110-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="data-exploration.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb110-4"><a href="data-exploration.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(feature,value) <span class="sc">%&gt;%</span></span>
<span id="cb110-5"><a href="data-exploration.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(value)) <span class="sc">+</span></span>
<span id="cb110-6"><a href="data-exploration.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb110-7"><a href="data-exploration.html#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(feature))</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-52-1.png" width="576" /></p>
<p>Suggested reading of <em>R for Data Science</em> (<a href="https://r4ds.had.co.nz/index.html" class="uri">https://r4ds.had.co.nz/index.html</a>):</p>
<table>
<thead>
<tr class="header">
<th>Chapter</th>
<th>Topic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>9</td>
<td>Introduction</td>
</tr>
<tr class="even">
<td>10</td>
<td>Tibbles</td>
</tr>
<tr class="odd">
<td>12</td>
<td>Tidy data</td>
</tr>
<tr class="even">
<td>15</td>
<td>Factors</td>
</tr>
<tr class="odd">
<td>17</td>
<td>Introduction</td>
</tr>
<tr class="even">
<td>18</td>
<td>Pipes</td>
</tr>
<tr class="odd">
<td>19</td>
<td>Functions</td>
</tr>
<tr class="even">
<td>20</td>
<td>Vectors</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="how-to-explore-the-data" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> How to explore the data?</h2>
<p>Let us look at the health insurance data set that contains information on patients along with their annual health care costs.</p>
<p>The descriptions of the columns are below.</p>
<ul>
<li><code>age</code>: Age of the individual</li>
<li><code>sex</code>: Sex</li>
<li><code>bmi</code>: Body Mass Index</li>
<li><code>children</code>: Number of children</li>
<li><code>smoker</code>: Is this person a smoker?</li>
<li><code>region</code>: Region</li>
<li><code>charges</code>: Annual health care costs.</li>
</ul>
<p><code>head()</code> shows the top n rows. <code>head(20)</code> shows the top 20 rows.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="data-exploration.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(health_insurance)</span></code></pre></div>
<pre><code>## # A tibble: 6 √ó 7
##     age sex      bmi children smoker region    charges
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;
## 1    19 female  27.9        0 yes    southwest  16885.
## 2    18 male    33.8        1 no     southeast   1726.
## 3    28 male    33          3 no     southeast   4449.
## 4    33 male    22.7        0 no     northwest  21984.
## 5    32 male    28.9        0 no     northwest   3867.
## 6    31 female  25.7        0 no     southeast   3757.</code></pre>
<p>Using a pipe is an alternative way of doing this.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="data-exploration.html#cb113-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<p></br></p>
<div class="studytip">
<p>
<strong>Shortcut:</strong> Use <code>CTRL</code> + <code>SHFT</code> + <code>M</code> to create pipes <code>%&gt;%</code>
</p>
</div>
<p></br></p>
<p>The <code>glimpse</code> function is similar to <code>str()</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-exploration.html#cb114-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 1,338
## Columns: 7
## $ age      &lt;dbl&gt; 19, 18, 28, 33, 32, 31, 46, 37, 37, 60, 25, 62, 23, 56, 27, 19, 52, 23, 56, 30, 60, 3‚Ä¶
## $ sex      &lt;chr&gt; &quot;female&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;female&quot;, &quot;female&quot;, &quot;female&quot;, &quot;male&quot;, &quot;fema‚Ä¶
## $ bmi      &lt;dbl&gt; 27.900, 33.770, 33.000, 22.705, 28.880, 25.740, 33.440, 27.740, 29.830, 25.840, 26.22‚Ä¶
## $ children &lt;dbl&gt; 0, 1, 3, 0, 0, 0, 1, 3, 2, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 2, 3, 0, 2, 1‚Ä¶
## $ smoker   &lt;chr&gt; &quot;yes&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;no&quot;, &quot;yes&quot;, &quot;no&quot;, &quot;no&quot;,‚Ä¶
## $ region   &lt;chr&gt; &quot;southwest&quot;, &quot;southeast&quot;, &quot;southeast&quot;, &quot;northwest&quot;, &quot;northwest&quot;, &quot;southeast&quot;, &quot;southe‚Ä¶
## $ charges  &lt;dbl&gt; 16884.924, 1725.552, 4449.462, 21984.471, 3866.855, 3756.622, 8240.590, 7281.506, 640‚Ä¶</code></pre>
<p>One of the most useful data science tools is counting things. The function <code>count()</code> gives the number of observations by a categorical feature.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-exploration.html#cb116-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">count</span>(children)</span></code></pre></div>
<pre><code>## # A tibble: 6 √ó 2
##   children     n
##      &lt;dbl&gt; &lt;int&gt;
## 1        0   574
## 2        1   324
## 3        2   240
## 4        3   157
## 5        4    25
## 6        5    18</code></pre>
<p>Two categories can be counted at once. This creates a table with all combinations of <code>region</code> and <code>sex</code> and shows the number ofobservations in each category.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-exploration.html#cb118-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> <span class="fu">count</span>(region, sex)</span></code></pre></div>
<pre><code>## # A tibble: 8 √ó 3
##   region    sex        n
##   &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt;
## 1 northeast female   161
## 2 northeast male     163
## 3 northwest female   164
## 4 northwest male     161
## 5 southeast female   175
## 6 southeast male     189
## 7 southwest female   162
## 8 southwest male     163</code></pre>
<p>The <code>summary()</code> function is shows a statistical summary. One caveat is that each column needs to be in its appropriate type. For example, <code>smoker</code>, <code>region</code>, and <code>sex</code> are all listed as characters when if they were factors, <code>summary</code> would give you count info.</p>
<p><strong>With incorrect data types</strong></p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-exploration.html#cb120-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       age            sex                 bmi           children        smoker         
##  Min.   :18.00   Length:1338        Min.   :15.96   Min.   :0.000   Length:1338       
##  1st Qu.:27.00   Class :character   1st Qu.:26.30   1st Qu.:0.000   Class :character  
##  Median :39.00   Mode  :character   Median :30.40   Median :1.000   Mode  :character  
##  Mean   :39.21                      Mean   :30.66   Mean   :1.095                     
##  3rd Qu.:51.00                      3rd Qu.:34.69   3rd Qu.:2.000                     
##  Max.   :64.00                      Max.   :53.13   Max.   :5.000                     
##     region             charges     
##  Length:1338        Min.   : 1122  
##  Class :character   1st Qu.: 4740  
##  Mode  :character   Median : 9382  
##                     Mean   :13270  
##                     3rd Qu.:16640  
##                     Max.   :63770</code></pre>
<p><strong>With correct data types</strong></p>
<p>This tells you that there are 324 patients in the northeast, 325 in the northwest, 364 in the southeast, etc.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-exploration.html#cb122-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="ot">&lt;-</span> health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="data-exploration.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.character, as.factor)</span>
<span id="cb122-3"><a href="data-exploration.html#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="data-exploration.html#cb122-4" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb122-5"><a href="data-exploration.html#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>##       age            sex           bmi           children     smoker           region   
##  Min.   :18.00   female:662   Min.   :15.96   Min.   :0.000   no :1064   northeast:324  
##  1st Qu.:27.00   male  :676   1st Qu.:26.30   1st Qu.:0.000   yes: 274   northwest:325  
##  Median :39.00                Median :30.40   Median :1.000              southeast:364  
##  Mean   :39.21                Mean   :30.66   Mean   :1.095              southwest:325  
##  3rd Qu.:51.00                3rd Qu.:34.69   3rd Qu.:2.000                             
##  Max.   :64.00                Max.   :53.13   Max.   :5.000                             
##     charges     
##  Min.   : 1122  
##  1st Qu.: 4740  
##  Median : 9382  
##  Mean   :13270  
##  3rd Qu.:16640  
##  Max.   :63770</code></pre>
<p></br></p>
<div class="studytip">
<p>
<strong>Shortcut:</strong> This ‚Äúmutate_if‚Äù trick can save you time from having to copy and paste from the template code of SOA and convert each variable to a factor individually
</p>
</div>
<p></br></p>
</div>
<div id="how-to-transform-the-data" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> How to transform the data?</h2>
<p>Transforming, manipulating, querying, and wrangling are synonyms in data terminology.</p>
<p>R syntax is designed to be similar to SQL. They begin with a <code>SELECT</code>, use <code>GROUP BY</code> to aggregate, and have a <code>WHERE</code> to remove observations. Unlike SQL, the ordering of these does not matter. <code>SELECT</code> can come after a <code>WHERE</code>.</p>
<p><strong>R to SQL translation</strong></p>
<pre><code>select() -&gt; SELECT
mutate() -&gt; user-defined columns
summarize() -&gt; aggregated columns
left_join() -&gt; LEFT JOIN
filter() -&gt; WHERE
group_by() -&gt; GROUP BY
filter() -&gt; HAVING
arrange() -&gt; ORDER BY
</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="data-exploration.html#cb125-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="data-exploration.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, region) <span class="sc">%&gt;%</span> </span>
<span id="cb125-3"><a href="data-exploration.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 √ó 2
##     age region   
##   &lt;dbl&gt; &lt;fct&gt;    
## 1    19 southwest
## 2    18 southeast
## 3    28 southeast
## 4    33 northwest
## 5    32 northwest
## 6    31 southeast</code></pre>
<p>Let us look at only those in the southeast region. Instead of <code>WHERE</code>, use <code>filter</code>.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="data-exploration.html#cb127-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="data-exploration.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">&quot;southeast&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="data-exploration.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, region) <span class="sc">%&gt;%</span> </span>
<span id="cb127-4"><a href="data-exploration.html#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 √ó 2
##     age region   
##   &lt;dbl&gt; &lt;fct&gt;    
## 1    18 southeast
## 2    28 southeast
## 3    31 southeast
## 4    46 southeast
## 5    62 southeast
## 6    56 southeast</code></pre>
<p>The SQL translation is</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb129-1"><a href="data-exploration.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> age, region</span>
<span id="cb129-2"><a href="data-exploration.html#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> health_insurance</span>
<span id="cb129-3"><a href="data-exploration.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> region <span class="op">=</span> <span class="st">&#39;southeast&#39;</span></span></code></pre></div>
<p>Instead of <code>ORDER BY</code>, use <code>arrange</code>. Unlike SQL, the order does not matter and <code>ORDER BY</code> doesn‚Äôt need to be last.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-exploration.html#cb130-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="data-exploration.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(age) <span class="sc">%&gt;%</span> </span>
<span id="cb130-3"><a href="data-exploration.html#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, region) <span class="sc">%&gt;%</span> </span>
<span id="cb130-4"><a href="data-exploration.html#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 √ó 2
##     age region   
##   &lt;dbl&gt; &lt;fct&gt;    
## 1    18 southeast
## 2    18 southeast
## 3    18 northeast
## 4    18 northeast
## 5    18 northeast
## 6    18 southeast</code></pre>
<p>The <code>group_by</code> comes before the aggregation, unlike in SQL where the <code>GROUP BY</code> comes last.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data-exploration.html#cb132-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="data-exploration.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb132-3"><a href="data-exploration.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 4 √ó 2
##   region    avg_age
##   &lt;fct&gt;       &lt;dbl&gt;
## 1 northeast    39.3
## 2 northwest    39.2
## 3 southeast    38.9
## 4 southwest    39.5</code></pre>
<p>In SQL, this would be</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb134-1"><a href="data-exploration.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> region, </span>
<span id="cb134-2"><a href="data-exploration.html#cb134-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">AVG</span>(age) <span class="kw">as</span> avg_age</span>
<span id="cb134-3"><a href="data-exploration.html#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> health_insurance</span>
<span id="cb134-4"><a href="data-exploration.html#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> region</span></code></pre></div>
<p>Just like in SQL, many different aggregate functions can be used such as <code>SUM</code>, <code>MEAN</code>, <code>MIN</code>, <code>MAX</code>, and so forth.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="data-exploration.html#cb135-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb135-2"><a href="data-exploration.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> </span>
<span id="cb135-3"><a href="data-exploration.html#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb135-4"><a href="data-exploration.html#cb135-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">max_age =</span> <span class="fu">max</span>(age),</span>
<span id="cb135-5"><a href="data-exploration.html#cb135-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">median_charges =</span> <span class="fu">median</span>(charges),</span>
<span id="cb135-6"><a href="data-exploration.html#cb135-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">bmi_std_dev =</span> <span class="fu">sd</span>(bmi))</span></code></pre></div>
<pre><code>## # A tibble: 4 √ó 5
##   region    avg_age max_age median_charges bmi_std_dev
##   &lt;fct&gt;       &lt;dbl&gt;   &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;
## 1 northeast    39.3      64         10058.        5.94
## 2 northwest    39.2      64          8966.        5.14
## 3 southeast    38.9      64          9294.        6.48
## 4 southwest    39.5      64          8799.        5.69</code></pre>
<p>To create new columns, the <code>mutate</code> function is used. For example, if we wanted a column of the annual charges of a person divided by their age</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="data-exploration.html#cb137-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb137-2"><a href="data-exploration.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">charges_over_age =</span> charges<span class="sc">/</span>age) <span class="sc">%&gt;%</span> </span>
<span id="cb137-3"><a href="data-exploration.html#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, charges, charges_over_age) <span class="sc">%&gt;%</span> </span>
<span id="cb137-4"><a href="data-exploration.html#cb137-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 √ó 3
##     age charges charges_over_age
##   &lt;dbl&gt;   &lt;dbl&gt;            &lt;dbl&gt;
## 1    19  16885.            889. 
## 2    18   1726.             95.9
## 3    28   4449.            159. 
## 4    33  21984.            666. 
## 5    32   3867.            121.</code></pre>
<p>We can create as many new columns as we want.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="data-exploration.html#cb139-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb139-2"><a href="data-exploration.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_squared  =</span> age<span class="sc">^</span><span class="dv">2</span>,</span>
<span id="cb139-3"><a href="data-exploration.html#cb139-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_cubed =</span> age<span class="sc">^</span><span class="dv">3</span>,</span>
<span id="cb139-4"><a href="data-exploration.html#cb139-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">age_fourth =</span> age<span class="sc">^</span><span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb139-5"><a href="data-exploration.html#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 √ó 10
##     age sex      bmi children smoker region    charges age_squared age_cubed age_fourth
##   &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;       &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
## 1    19 female  27.9        0 yes    southwest  16885.         361      6859     130321
## 2    18 male    33.8        1 no     southeast   1726.         324      5832     104976
## 3    28 male    33          3 no     southeast   4449.         784     21952     614656
## 4    33 male    22.7        0 no     northwest  21984.        1089     35937    1185921
## 5    32 male    28.9        0 no     northwest   3867.        1024     32768    1048576</code></pre>
<p>The <code>CASE WHEN</code> function is quite similar to SQL. For example, we can create a column which is <code>0</code> when <code>age &lt; 50</code>, <code>1</code> when <code>50 &lt;= age &lt;= 70</code>, and <code>2</code> when <code>age &gt; 70</code>.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="data-exploration.html#cb141-1" aria-hidden="true" tabindex="-1"></a>health_insurance <span class="sc">%&gt;%</span> </span>
<span id="cb141-2"><a href="data-exploration.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_bucket =</span> <span class="fu">case_when</span>(age <span class="sc">&lt;</span> <span class="dv">50</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb141-3"><a href="data-exploration.html#cb141-3" aria-hidden="true" tabindex="-1"></a>                                age <span class="sc">&lt;=</span> <span class="dv">70</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb141-4"><a href="data-exploration.html#cb141-4" aria-hidden="true" tabindex="-1"></a>                                age <span class="sc">&gt;</span> <span class="dv">70</span> <span class="sc">~</span> <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb141-5"><a href="data-exploration.html#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, age_bucket)</span></code></pre></div>
<pre><code>## # A tibble: 1,338 √ó 2
##      age age_bucket
##    &lt;dbl&gt;      &lt;dbl&gt;
##  1    19          0
##  2    18          0
##  3    28          0
##  4    33          0
##  5    32          0
##  6    31          0
##  7    46          0
##  8    37          0
##  9    37          0
## 10    60          1
## # ‚Ä¶ with 1,328 more rows</code></pre>
<p>SQL translation:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb143-1"><a href="data-exploration.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="cf">CASE</span> <span class="cf">WHEN</span> AGE <span class="op">&lt;</span> <span class="dv">50</span> <span class="cf">THEN</span> <span class="dv">0</span></span>
<span id="cb143-2"><a href="data-exploration.html#cb143-2" aria-hidden="true" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="cf">WHEN</span> AGE <span class="op">&lt;=</span> <span class="dv">70</span> <span class="cf">THEN</span> <span class="dv">1</span></span>
<span id="cb143-3"><a href="data-exploration.html#cb143-3" aria-hidden="true" tabindex="-1"></a>       <span class="cf">ELSE</span> <span class="dv">2</span></span>
<span id="cb143-4"><a href="data-exploration.html#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> health_insurance</span></code></pre></div>
</div>
<div id="missing-values" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Missing values</h2>
<p>The most recent PA exams have had questions related to missing values. You need to perform checks before moving on to the model-building phases. In real life, man-made data always have missing observations.</p>
<p>In R, there are two ways that data can be missing. The first is the <code>NA</code> value. If you read in a csv file that has blank values, R will translate them into NAs.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data-exploration.html#cb144-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="cn">NA</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">2</span>))</span></code></pre></div>
<p>You can check for <code>NA</code> values with <code>summary</code> or <code>sum(is.na(df))</code>.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="data-exploration.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<pre><code>##        x              y    
##  Min.   :1.00   Min.   :2  
##  1st Qu.:1.25   1st Qu.:2  
##  Median :1.50   Median :2  
##  Mean   :1.50   Mean   :2  
##  3rd Qu.:1.75   3rd Qu.:2  
##  Max.   :2.00   Max.   :2  
##  NA&#39;s   :1      NA&#39;s   :2</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data-exploration.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df))</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>The second type is for ‚ÄúNot A Number‚Äù (<code>NaN</code>) or infinity <code>Inf</code> values. Dividing by zero produces <code>Inf</code> and taking the square root of a negative number produces <code>NaN</code>. Notice that <code>NaN</code> counts as <code>NA</code> but <code>Inf</code> does not. R says that there are only two missing values in this table even though there are two values which are infinity.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="data-exploration.html#cb149-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">0</span>, <span class="dv">4</span><span class="sc">/</span><span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">1</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>), <span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">4</span>))</span></code></pre></div>
<pre><code>## Warning in sqrt(-1): NaNs produced</code></pre>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data-exploration.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(df))</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data-exploration.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<pre><code>##        x              y      
##  Min.   :1.00   Min.   :2.0  
##  1st Qu.:3.25   1st Qu.:2.5  
##  Median : Inf   Median :3.0  
##  Mean   : Inf   Mean   :3.0  
##  3rd Qu.: Inf   3rd Qu.:3.5  
##  Max.   : Inf   Max.   :4.0  
##                 NA&#39;s   :2</code></pre>
<div id="types-of-missing-values" class="section level3" number="7.6.1">
<h3><span class="header-section-number">7.6.1</span> Types of Missing Values</h3>
<p>Read the Data Dictionary from the Project Statement and check for these three types of missingness.</p>
<ul>
<li><strong>Missing at random (MAR):</strong> There is no pattern between the missingness and the value of missing variable.</li>
<li><strong>Missing not at random (MNAR):</strong> The value of the missing variable is related to the reason it is missing. Example: A survey concerning illegal drug use where respondents are reluctant to admit that they have broken the law.</li>
<li><strong>Hidden missingness:</strong> When a value is coded incorrectly, such as when a numeric variable with ‚Äú999‚Äù or ‚Äú0‚Äù or a factor does not match the Data Dictionary.</li>
</ul>
</div>
<div id="missing-value-resolutions" class="section level3" number="7.6.2">
<h3><span class="header-section-number">7.6.2</span> Missing Value Resolutions:</h3>
<p>You can use any of these methods but make sure that you describe your reasoning in the report.</p>
<ul>
<li><strong>Remove observations:</strong> Use when there are only a few missing values or when they are MAR.</li>
<li><strong>Create new level ‚Äúmissing:‚Äù</strong> Use when there are more values or when they are MNAR.<br />
</li>
<li><strong>Impute with the mean:</strong> Use when there are numeric values MAR.</li>
<li><strong>Remove variable altogether:</strong> Use when most observations are missing (‚â• 50% of observations), and there is no way to repair the data.</li>
</ul>
<p>While you are reviewing the data for missingness, you may also decide to remove some variables altogether. This could be because of racial or ethical concerns, limitations of future availability, instability of the data over time, or inexplicability.</p>
</div>
</div>
<div id="example-soa-pa-121219-task-1" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Example: SOA PA 12/12/19, Task 1</h2>
<p>This chapter is based on the first task of the December 2019 Exam PA.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/OUkC6vVJeQA?si=obo92yFblJ830S-y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p><strong>TASK 1 (12 points)</strong></p>
<blockquote>
<p>Examine each variable and make appropriate adjustments.</p>
</blockquote>
<blockquote>
<p>Examine each predictor variable other than cap_gain both on its own and for value_flag. Make appropriate adjustments. Do not make any adjustments to the cap_gain variable at this time.</p>
</blockquote>
<blockquote>
<p>There should be no further variable adjustments unless specifically requested.</p>
</blockquote>
<p>As a reminder, all data for this book can be accessed from the package <code>ExamPAData</code>. In the actual exam, you will read the file from the Prometric computer.</p>
<p>Because the data is already loaded, use the below code to access the data.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data-exploration.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ExamPAData)</span></code></pre></div>
<p>To save keystrokes, give the data a short name such as <code>df</code> for ‚Äúdata frame.‚Äù</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-exploration.html#cb156-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> customer_value <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.character, as.factor)</span></code></pre></div>
<div id="garbage-in-garbage-out" class="section level3" number="7.7.1">
<h3><span class="header-section-number">7.7.1</span> Garbage in; garbage out üóë</h3>
<p>This is a common saying when working with predictive models. No matter how complex the model, the actual result will be wrong if the data is terrible. For this exam, master the art of data manipulation, and everything becomes easier!</p>
<p>Begin by looking at a summary.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data-exploration.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<pre><code>##       age        education_num                 marital_status     occupation       cap_gain    
##  Min.   :17.00   Min.   : 1.00   Divorced             : 6633   Group 1 : 7237   Min.   :    0  
##  1st Qu.:28.00   1st Qu.: 9.00   Married-AF-spouse    :   37   Group 2 :10123   1st Qu.:    0  
##  Median :37.00   Median :10.00   Married-civ-spouse   :22379   Group 3 :13971   Median :    0  
##  Mean   :38.64   Mean   :10.08   Married-spouse-absent:  628   Group 4 : 2444   Mean   : 1079  
##  3rd Qu.:48.00   3rd Qu.:12.00   Never-married        :16117   Group 5 :12258   3rd Qu.:    0  
##  Max.   :90.00   Max.   :16.00   Separated            : 1530   Group NA: 2809   Max.   :99999  
##                                  Widowed              : 1518                                   
##  hours_per_week      score       value_flag  
##  Min.   : 1.00   Min.   :43.94   High:11687  
##  1st Qu.:40.00   1st Qu.:57.50   Low :37155  
##  Median :40.00   Median :60.24               
##  Mean   :40.42   Mean   :60.23               
##  3rd Qu.:45.00   3rd Qu.:62.95               
##  Max.   :99.00   Max.   :76.53               
## </code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data-exploration.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## spec_tbl_df [48,842 √ó 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ age           : num [1:48842] 39 50 38 53 28 37 49 52 31 42 ...
##  $ education_num : num [1:48842] 13 13 9 7 13 14 5 9 14 13 ...
##  $ marital_status: Factor w/ 7 levels &quot;Divorced&quot;,&quot;Married-AF-spouse&quot;,..: 5 3 1 3 3 3 4 3 5 3 ...
##  $ occupation    : Factor w/ 6 levels &quot;Group 1&quot;,&quot;Group 2&quot;,..: 2 5 1 1 5 5 1 5 5 5 ...
##  $ cap_gain      : num [1:48842] 2174 0 0 0 0 ...
##  $ hours_per_week: num [1:48842] 40 13 40 40 40 40 16 45 50 40 ...
##  $ score         : num [1:48842] 59 55.8 62.8 60.1 53.3 ...
##  $ value_flag    : Factor w/ 2 levels &quot;High&quot;,&quot;Low&quot;: 2 2 2 2 2 2 2 1 1 1 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   age = col_double(),
##   ..   education_num = col_double(),
##   ..   marital_status = col_character(),
##   ..   occupation = col_character(),
##   ..   cap_gain = col_double(),
##   ..   hours_per_week = col_double(),
##   ..   score = col_double(),
##   ..   value_flag = col_character()
##   .. )</code></pre>
</div>
<div id="be-a-detective" class="section level3" number="7.7.2">
<h3><span class="header-section-number">7.7.2</span> Be a detective üîé</h3>
<p>Sherlock Holmes is famous for saying, ‚ÄúYou see, Watson, but you do not observe!‚Äù</p>
<p>Just like detectives, actuaries need to collect data and make observations. Each exam has a few ‚Äúanomalies‚Äù in the data, which they expect candidates to mention. These could be</p>
<ul>
<li>Any value that does not match the Data Dictionary in the Project Statement</li>
<li>Variables that have <code>NA</code> values</li>
<li>Variables that have many factor levels</li>
<li>Incorrect data types
<ul>
<li>Factors that are read as characters or vice versa</li>
<li>Numeric variables that are factor/character</li>
</ul></li>
<li>Extreme values (Numeric values are too high or low)</li>
</ul>
<p>You will get very good at spotting these with practice. Just from looking at the above <code>summary</code>, we can observe the following:</p>
<p><strong>Observations</strong></p>
<ul>
<li>The data consists of 48,842 obs. of 8 variables.</li>
<li>The lowest <code>age</code> is 17 but the Project Statement says to only include observations with <code>age</code> &gt;= 25.</li>
<li>The <code>cap_gain</code> distribution is right-skewed because the median (0) is less than the mean (1079), but the Project Statement said not to transform this. Otherwise, I would apply a log transform.</li>
<li><code>education_num</code> takes integer values between 1 and 16. There are many values that are low.</li>
<li>There are missing values when <code>occupation</code> is <code>group NA</code>, which means that the occupation of the person is unknown.</li>
<li>The amount that people work per work, <code>hours_per_week</code>, varies by a lot. The lowest is 1 hour, and the highest is 99. Most people work 40 hours per week.</li>
</ul>
<p></br></p>
<div class="studytip">
<p>
<strong>Study Tip:</strong> Never apply a log transform to the target variable. Only the predictor variables get logs taken. At this stage, we note if it is right-skewed or not.
</p>
</div>
<p></br></p>
<p>The solution of SOA recommends leaving comments in your .Rmd file. This helps to give you partial credit on questions that you may answer incorrectly.</p>
<p><strong>Good comments</strong></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data-exploration.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co">#I observe that there are no missing values other than those indicated by Group NA for occupation.</span></span>
<span id="cb161-2"><a href="data-exploration.html#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="data-exploration.html#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="co">#I removed the code provided by my assistant. It is embedded in later chunks as needed.</span></span>
<span id="cb161-4"><a href="data-exploration.html#cb161-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-5"><a href="data-exploration.html#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="co">#I excluded people under the age of 25</span></span>
<span id="cb161-6"><a href="data-exploration.html#cb161-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[df<span class="sc">$</span>age <span class="sc">&gt;=</span> <span class="dv">25</span>,]</span>
<span id="cb161-7"><a href="data-exploration.html#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="data-exploration.html#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="co">#I convert the target to 0-1.</span></span>
<span id="cb161-9"><a href="data-exploration.html#cb161-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>value_flag <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df<span class="sc">$</span>value_flag <span class="sc">==</span> <span class="st">&quot;High&quot;</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span></code></pre></div>
<p><strong>Useless comments</strong></p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-exploration.html#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co">#this is a comment</span></span>
<span id="cb162-2"><a href="data-exploration.html#cb162-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-3"><a href="data-exploration.html#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co">#this loads a library called ggplot2</span></span>
<span id="cb162-4"><a href="data-exploration.html#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
</div>
<div id="a-picture-is-worth-a-thousand-words" class="section level3" number="7.7.3">
<h3><span class="header-section-number">7.7.3</span> A picture is worth a thousand words üì∑</h3>
<p>What is your favorite type of graph? Mine is a radar chart. This is a graphical method of displaying multivariate data in the form of a two-dimensional chart of three or more quantitative variables represented on axes starting from the same point.</p>
<p>That is pretty, right?</p>
<p><img src="images/radar_graph.png" width="1300%" style="display: block; margin: auto;" /></p>
<p><strong>Do not waste time trying to make the graphs perfect!</strong></p>
<p>Only change code that you <strong>need</strong> to change. If you need assistance to do it faster then SOA can help you save time by giving you templates.</p>
<p>This is the code template that they give you. You only need to change the ‚Äúvariable‚Äù names.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data-exploration.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This code makes a histogram for a continuous variable.</span></span>
<span id="cb163-2"><a href="data-exploration.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> variable)) <span class="sc">+</span> </span>
<span id="cb163-3"><a href="data-exploration.html#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb163-4"><a href="data-exploration.html#cb163-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;variable&quot;</span>) <span class="sc">+</span></span>
<span id="cb163-5"><a href="data-exploration.html#cb163-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb163-6"><a href="data-exploration.html#cb163-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-7"><a href="data-exploration.html#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="co"># This code makes a bar chart for a factor variable.</span></span>
<span id="cb163-8"><a href="data-exploration.html#cb163-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> variable)) <span class="sc">+</span></span>
<span id="cb163-9"><a href="data-exploration.html#cb163-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb163-10"><a href="data-exploration.html#cb163-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;variable&quot;</span>) <span class="sc">+</span></span>
<span id="cb163-11"><a href="data-exploration.html#cb163-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p>Okay, that was not 100% true. It is common for the code to require <strong>small</strong> changes. changes. For instance, the histogram that they give you has bins that are too narrow for <code>age</code>, which causes these spikes to show up in the graph.</p>
<blockquote>
<p>The best candidates altered the code to create more appropriate plots and summary tables.</p>
</blockquote>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="data-exploration.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This code makes a histogram for a continuous variable.</span></span>
<span id="cb164-2"><a href="data-exploration.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span> </span>
<span id="cb164-3"><a href="data-exploration.html#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span> <span class="co">#not the right number of bins</span></span>
<span id="cb164-4"><a href="data-exploration.html#cb164-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;age&quot;</span>) <span class="sc">+</span></span>
<span id="cb164-5"><a href="data-exploration.html#cb164-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb164-6"><a href="data-exploration.html#cb164-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Bad: Default histogram with spikes&quot;</span>)</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-84-1.png" width="576" /></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data-exploration.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Histograms of continuous variables</span></span>
<span id="cb165-2"><a href="data-exploration.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> age)) <span class="sc">+</span></span>
<span id="cb165-3"><a href="data-exploration.html#cb165-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fl">24.5</span>,<span class="fl">99.5</span>, <span class="at">by =</span> <span class="dv">5</span>)) <span class="sc">+</span>  <span class="co">#make bins wider and set range </span></span>
<span id="cb165-4"><a href="data-exploration.html#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Age&quot;</span>) <span class="sc">+</span></span>
<span id="cb165-5"><a href="data-exploration.html#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb165-6"><a href="data-exploration.html#cb165-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Good: After adjusting the breaks&quot;</span>)</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-84-2.png" width="576" /></p>
<p>How do you know when a variable should a factor and when it should be numeric?</p>
</div>
<div id="factor-or-numeric" class="section level3" number="7.7.4">
<h3><span class="header-section-number">7.7.4</span> Factor or numeric ‚ùì</h3>
<p>Which variables should be converted to factors and which should be numeric?</p>
<p>Questions of this sort have come up twice. On Hospital Readmissions, a Length of Stay variable was numeric but had only a few values, so some candidates treated it as a factor. The <code>education_num</code> variable here is also numeric but only has 16 unique values. So should this be a numeric or a factor?</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-exploration.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>education_num)</span></code></pre></div>
<pre><code>## 
##     1     2     3     4     5     6     7     8     9    10    11    12    13    14    15    16 
##    68   231   446   877   618   995  1042   382 13320  7812  1862  1411  7298  2621   834   593</code></pre>
<p>Ask yourself this question: is there a way of comparing two values of the variable together?</p>
<ul>
<li>If yes, then use numeric<br />
</li>
<li>If no, then use a factor</li>
</ul>
<p>For exmaple, we can say that <code>education_num = 2</code> is less than <code>education_num = 4</code>, which means there is a natural order. This is also known as an <strong>ordinal</strong>.</p>
<p>If the factor is say, <code>color</code>, which can be <code>red</code>, <code>blue</code>, or <code>green</code>, then there is no way of comparing values together. Is <code>red</code> greater than <code>blue</code>? This question has no meaning.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-exploration.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> education_num)) <span class="sc">+</span></span>
<span id="cb168-2"><a href="data-exploration.html#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb168-3"><a href="data-exploration.html#cb168-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Education&quot;</span>) <span class="sc">+</span></span>
<span id="cb168-4"><a href="data-exploration.html#cb168-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb168-5"><a href="data-exploration.html#cb168-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Default number of bins (30)&quot;</span>)</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-86-1.png" width="576" /></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data-exploration.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> education_num)) <span class="sc">+</span></span>
<span id="cb169-2"><a href="data-exploration.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">16</span>) <span class="sc">+</span></span>
<span id="cb169-3"><a href="data-exploration.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Education&quot;</span>) <span class="sc">+</span></span>
<span id="cb169-4"><a href="data-exploration.html#cb169-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb169-5"><a href="data-exploration.html#cb169-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Set number of bins to number of factor levels (16) &quot;</span>)</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-86-2.png" width="576" /></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="data-exploration.html#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set bins equal to number of levels, could have made bar chart.</span></span></code></pre></div>
<p>We could also use a bar plot.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="data-exploration.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(<span class="at">x =</span> education_num)) <span class="sc">+</span> </span>
<span id="cb171-2"><a href="data-exploration.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;count&quot;</span>) <span class="sc">+</span> </span>
<span id="cb171-3"><a href="data-exploration.html#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Bar plot&quot;</span>)</span></code></pre></div>
<p><img src="Exam-PA-Study-Manual_files/figure-html/unnamed-chunk-87-1.png" width="576" /></p>
<p>Lastly, read the Project Statement carefully and only do what it tells you to do.</p>
<blockquote>
<p>Candidates were not required to make a plot for cap_gain. This solution has the plot made here rather than in Task 6.</p>
</blockquote>
</div>
<div id="of-statistics-are-false" class="section level3" number="7.7.5">
<h3><span class="header-section-number">7.7.5</span> 73.6% of statistics are false üò±</h3>
<p>Really? No, but statistics can help you see patterns that data visualization by itself can miss. Along with the ggplot codes, there will be code to look at summary statistics. Here is a refresher on what these statistics mean (no pun intended).</p>
<ul>
<li><strong>Mean</strong>: The average. This gets skewed by outliers easily. If the mean is greater than the median, then the distribution is right-skewed.</li>
<li><strong>Median</strong>: The ‚Äúmiddle‚Äù value. This is an average that reduces the impact of outliers.</li>
<li><strong>Variance</strong>: The amount by which each observation differs from the mean.<br />
</li>
<li><strong>Standard Deviation</strong>: The square root of the variance.</li>
<li><strong>n()</strong>: The number of observations. Always take note of groups that do not have many observations.</li>
</ul>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-exploration.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This code provides, for each level of a factor variable, the number for which value_flag is zero, the number for which it is one, the total number of observations, and the proportion of ones.</span></span>
<span id="cb172-2"><a href="data-exploration.html#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the variable name should not be enclosed in quotation marks.</span></span>
<span id="cb172-3"><a href="data-exploration.html#cb172-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb172-4"><a href="data-exploration.html#cb172-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(variable) <span class="sc">%&gt;%</span></span>
<span id="cb172-5"><a href="data-exploration.html#cb172-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb172-6"><a href="data-exploration.html#cb172-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">zeros =</span> <span class="fu">sum</span>(value_flag <span class="sc">==</span> <span class="dv">0</span>),</span>
<span id="cb172-7"><a href="data-exploration.html#cb172-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">ones =</span> <span class="fu">sum</span>(value_flag <span class="sc">==</span> <span class="dv">1</span>),</span>
<span id="cb172-8"><a href="data-exploration.html#cb172-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb172-9"><a href="data-exploration.html#cb172-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion =</span> <span class="fu">mean</span>(value_flag)</span>
<span id="cb172-10"><a href="data-exploration.html#cb172-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>Factors levels should be simplified. If a group has only a few observations, then there will be problems with the model. In our data, take a look at the <code>marital_status</code> column. Do you observe anything unusual?</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data-exploration.html#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>marital_status)</span></code></pre></div>
<pre><code>## 
##              Divorced     Married-AF-spouse    Married-civ-spouse Married-spouse-absent 
##                  6498                    31                 21661                   573 
##         Never-married             Separated               Widowed 
##                  8697                  1438                  1512</code></pre>
<p>Only 31 observations have <code>Married-AF-spouse</code>. This is because the sample size <code>n = 31</code> is too small. In modeling jargon, this is ‚Äústatistical insignificant‚Äù and will cause the p-value on <code>marital_status</code> to be large. You can fix this in a few different ways</p>
<ul>
<li>Delete these observations (Not recommended)</li>
<li>Group these observations together with <code>Married-spouse</code> (Simplest method)</li>
</ul>
<p>Let us use the second method.</p>
<p>First, look at the levels of the factor variable.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data-exploration.html#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(df<span class="sc">$</span>marital_status)</span></code></pre></div>
<pre><code>## [1] &quot;Divorced&quot;              &quot;Married-AF-spouse&quot;     &quot;Married-civ-spouse&quot;    &quot;Married-spouse-absent&quot;
## [5] &quot;Never-married&quot;         &quot;Separated&quot;             &quot;Widowed&quot;</code></pre>
<p>Now look at the profitability across marital status. For <code>Married-AF-spouse</code> and <code>Married-civ-spouse</code> the proportion of high profit customers is <strong>high</strong>, but for <code>Married-spouse-absent</code> it is <strong>low.</strong> Even though these are all ‚Äúmarried,‚Äù it would be a bad idea to combine them because the profitability is so different.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data-exploration.html#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Proportion of ones by category of factor variable</span></span>
<span id="cb177-2"><a href="data-exploration.html#cb177-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb177-3"><a href="data-exploration.html#cb177-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(marital_status) <span class="sc">%&gt;%</span></span>
<span id="cb177-4"><a href="data-exploration.html#cb177-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(</span>
<span id="cb177-5"><a href="data-exploration.html#cb177-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">zeros =</span> <span class="fu">sum</span>(value_flag <span class="sc">==</span> <span class="dv">0</span>),</span>
<span id="cb177-6"><a href="data-exploration.html#cb177-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">ones =</span> <span class="fu">sum</span>(value_flag <span class="sc">==</span> <span class="dv">1</span>),</span>
<span id="cb177-7"><a href="data-exploration.html#cb177-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb177-8"><a href="data-exploration.html#cb177-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion =</span> <span class="fu">mean</span>(value_flag)</span>
<span id="cb177-9"><a href="data-exploration.html#cb177-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 7 √ó 5
##   marital_status        zeros  ones     n proportion
##   &lt;fct&gt;                 &lt;int&gt; &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
## 1 Divorced               5829   669  6498     0.103 
## 2 Married-AF-spouse        19    12    31     0.387 
## 3 Married-civ-spouse    11727  9934 21661     0.459 
## 4 Married-spouse-absent   515    58   573     0.101 
## 5 Never-married          8000   697  8697     0.0801
## 6 Separated              1342    96  1438     0.0668
## 7 Widowed                1384   128  1512     0.0847</code></pre>
<p>Then create a vector that has the simpler levels that you want. The order needs to be the same.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data-exploration.html#cb179-1" aria-hidden="true" tabindex="-1"></a>simple_levels <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Divorced&quot;</span>, <span class="st">&quot;Married-spouse&quot;</span>, <span class="st">&quot;Married-spouse&quot;</span>, <span class="st">&quot;Married-spuouse-absent&quot;</span>, <span class="st">&quot;Neber-married&quot;</span>, <span class="st">&quot;Separated&quot;</span>, <span class="st">&quot;Widowed&quot;</span>)</span></code></pre></div>
<p>The function <code>mapvalues</code> takes in three arguments. You can read about this by typing <code>?mapvalues</code> into the console.</p>
<p><code>x</code> : the factor or vector to modify</p>
<p><code>from</code> : a vector of the items to replace</p>
<p><code>to</code> : a vector of replacement values</p>
<p>Then map the old values to the simpler values.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="data-exploration.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Combine the two marital status levels</span></span>
<span id="cb180-2"><a href="data-exploration.html#cb180-2" aria-hidden="true" tabindex="-1"></a>var.levels <span class="ot">&lt;-</span> <span class="fu">levels</span>(df<span class="sc">$</span>marital_status)</span>
<span id="cb180-3"><a href="data-exploration.html#cb180-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>marital_status <span class="ot">&lt;-</span> <span class="fu">mapvalues</span>(<span class="at">x =</span> df<span class="sc">$</span>marital_status,</span>
<span id="cb180-4"><a href="data-exploration.html#cb180-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">from =</span> var.levels, </span>
<span id="cb180-5"><a href="data-exploration.html#cb180-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">to =</span> simple_levels) </span></code></pre></div>
<p>Now, when you look at the <code>marital_status</code> levels, you will see the simpler levels.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="data-exploration.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(df<span class="sc">$</span>marital_status)</span></code></pre></div>
<pre><code>## [1] &quot;Divorced&quot;               &quot;Married-spouse&quot;         &quot;Married-spuouse-absent&quot; &quot;Neber-married&quot;         
## [5] &quot;Separated&quot;              &quot;Widowed&quot;</code></pre>
<p>You can also check that the number of observations is what you expect.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-exploration.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>marital_status)</span></code></pre></div>
<pre><code>## 
##               Divorced         Married-spouse Married-spuouse-absent          Neber-married 
##                   6498                  21692                    573                   8697 
##              Separated                Widowed 
##                   1438                   1512</code></pre>
</div>
</div>
<div id="exercises" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Exercises</h2>
<div id="data-exploration-practice" class="section level3" number="7.8.1">
<h3><span class="header-section-number">7.8.1</span> Data Exploration Practice</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OUkC6vVJeQA?si=obo92yFblJ830S-y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
</div>
<div id="dplyr-practice" class="section level3" number="7.8.2">
<h3><span class="header-section-number">7.8.2</span> Dplyr Practice</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hcF-JGB-qgs?si=av2kN1qZ5JScpaa3" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

<p>Run this code on your computer to answer these exercises.</p>
<p>The data <code>actuary_salaries</code> contains the salaries of actuaries collected from the DW Simpson survey. Use this data to answer the exercises below.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-exploration.html#cb185-1" aria-hidden="true" tabindex="-1"></a>actuary_salaries <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 138
## Columns: 6
## $ industry    &lt;chr&gt; &quot;Casualty&quot;, &quot;Casualty&quot;, &quot;Casualty&quot;, &quot;Casualty&quot;, &quot;Casualty&quot;, &quot;Casualty&quot;, &quot;Casualty&quot;‚Ä¶
## $ exams       &lt;chr&gt; &quot;1 Exam&quot;, &quot;2 Exams&quot;, &quot;3 Exams&quot;, &quot;4 Exams&quot;, &quot;1 Exam&quot;, &quot;2 Exams&quot;, &quot;3 Exams&quot;, &quot;4 Exam‚Ä¶
## $ experience  &lt;dbl&gt; 1, 1, 1, 1, 3, 3, 3, 3, 3, 3, 3, 3, 5, 5, 5, 5, 5, 5, 5, 5, 5, 7, 7, 7, 7, 7, 7, 7‚Ä¶
## $ salary      &lt;chr&gt; &quot;48 - 65&quot;, &quot;50 - 71&quot;, &quot;54 - 77&quot;, &quot;58 - 82&quot;, &quot;54 - 72&quot;, &quot;57 - 81&quot;, &quot;62 - 87&quot;, &quot;63 -‚Ä¶
## $ salary_low  &lt;dbl&gt; 48, 50, 54, 58, 54, 57, 62, 63, 65, 70, 72, 85, 55, 58, 66, 71, 73, 76, 85, 90, 11‚Ä¶
## $ salary_high &lt;chr&gt; &quot;65&quot;, &quot;71&quot;, &quot;77&quot;, &quot;82&quot;, &quot;72&quot;, &quot;81&quot;, &quot;87&quot;, &quot;91&quot;, &quot;95&quot;, &quot;97&quot;, &quot;99&quot;, &quot;112&quot;, &quot;80&quot;, &quot;83‚Ä¶</code></pre>
<ol style="list-style-type: decimal">
<li>How many industries are represented?</li>
<li>The <code>salary_high</code> column is a character type when it should be numeric. Change this column to numeric.</li>
<li><ol start="3" style="list-style-type: decimal">
<li>What are the highest and lowest salaries for an actuary in Health with 5 exams passed?</li>
</ol></li>
<li>Create a new column called <code>salary_mid</code> which has the middle of the <code>salary_low</code> and <code>salary_high</code> columns.</li>
<li>When grouping by industry, what is the highest <code>salary_mid</code>? What about <code>salary_high</code>? What is the lowest <code>salary_low</code>?</li>
<li>There is a mistake when <code>salary_low == 11</code>. Find and fix this mistake, and then rerun the code from the previous task.</li>
<li>Create a new column, called <code>n_exams</code>, which is an integer. Use 7 for ASA/ACAS and 10 for FSA/FCAS. Use the code below as a starting point and fill in the <code>_</code> spaces</li>
<li>Create a column called <code>social_life</code>, which is equal to <code>n_exams</code>/<code>experience</code>. What is the average (mean) <code>social_life</code> by industry? Bonus question: what is wrong with using this as a statistical measure?</li>
</ol>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-exploration.html#cb187-1" aria-hidden="true" tabindex="-1"></a>actuary_salaries <span class="ot">&lt;-</span> actuary_salaries <span class="sc">%&gt;%</span> </span>
<span id="cb187-2"><a href="data-exploration.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_exams =</span> <span class="fu">case_when</span>(exams <span class="sc">==</span> <span class="st">&quot;FSA&quot;</span> <span class="sc">~</span> _,</span>
<span id="cb187-3"><a href="data-exploration.html#cb187-3" aria-hidden="true" tabindex="-1"></a>                             exams <span class="sc">==</span> <span class="st">&quot;ASA&quot;</span> <span class="sc">~</span> _,</span>
<span id="cb187-4"><a href="data-exploration.html#cb187-4" aria-hidden="true" tabindex="-1"></a>                             exams <span class="sc">==</span> <span class="st">&quot;FCAS&quot;</span> <span class="sc">~</span> _,</span>
<span id="cb187-5"><a href="data-exploration.html#cb187-5" aria-hidden="true" tabindex="-1"></a>                             exams <span class="sc">==</span> <span class="st">&quot;ACAS&quot;</span> <span class="sc">~</span> _,</span>
<span id="cb187-6"><a href="data-exploration.html#cb187-6" aria-hidden="true" tabindex="-1"></a>                             <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">as.numeric</span>(<span class="fu">substr</span>(exams,_,_)))) </span></code></pre></div>
<ol start="8" style="list-style-type: decimal">
<li>Create a column called <code>social_life</code>, which is equal to <code>n_exams</code>/<code>experience</code>. What is the average (mean) <code>social_life</code> by industry? Bonus question: what is wrong with using this as a statistical measure?</li>
</ol>
</div>
</div>
<div id="answers-to-exercises" class="section level2" number="7.9">
<h2><span class="header-section-number">7.9</span> Answers to exercises</h2>
<p>Answers to these exercises, along with a video tutorial, are available at <a href="https://futuroinsight.com/">futuroinsight.com</a>.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-programming.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduction-to-modeling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/sdcastillo/PA-R-Study-Manual/edit/master/03-data-exploration.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Exam-PA-Study-Manual.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
